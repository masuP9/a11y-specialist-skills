---
name: a11y-review
description: アクセシビリティレビュー。Webページ、コンポーネント実装、デザイン案、仕様書をWCAG・WAI-ARIA APG観点でレビュー。「a11yレビューして」「アクセシビリティ確認」「accessibility review」などで起動
allowed-tools: Read, Grep, Glob, WebFetch, mcp__playwright__browser_snapshot, mcp__playwright__browser_navigate, mcp__playwright__browser_click
---

# アクセシビリティレビュー

Webページ、コンポーネント実装、デザイン案、仕様書をWCAG 2.2およびWAI-ARIA APG観点でレビューする。

## レビュー対象の判別と方法

| 対象 | 判別 | 方法 |
|------|------|------|
| Webページ | URL | Playwrightでスナップショット取得、DOM構造確認 |
| ローカル実装 | ファイルパス | コード読み取り、静的解析 |
| デザイン案 | 画像/FigmaURL | 視覚的確認 |
| 仕様書 | ドキュメント | 仕様内容チェック |

## チェック観点

### 自動チェック項目

| カテゴリ | チェック内容 |
|----------|-------------|
| セマンティクス | 見出し構造（h1-h6の順序）、ランドマーク（main, nav, header等）、適切なHTML要素選択 |
| 代替テキスト | img, svg, アイコンのalt/aria-label有無と適切さ |
| フォーム | label関連付け、必須フィールド明示、グループ化（fieldset/legend） |
| ARIA | role属性の正しさ、aria-*属性の適切な使用、冗長なARIA回避 |
| インタラクティブ要素 | アクセシブルネーム、キーボードフォーカス可能性、tabindex |
| リンク・ボタン | 目的が明確なテキスト、空リンクの回避 |
| 見出し・構造 | スキップリンク、コンテンツの論理的順序 |

### 手動確認を促す項目（指摘のみ）

| カテゴリ | 理由 |
|----------|------|
| 一貫したナビゲーション | 複数ページ比較が必要 |
| エラー表示・説明 | フォーム操作が必要 |
| 色コントラスト | 測定ツールが必要（指摘時に確認を推奨） |
| キーボード操作完全性 | 全操作パスのテストが必要 |
| 動的コンテンツ更新 | 状態変化の観察が必要 |
| フォーカス管理 | モーダル、SPA遷移等の実操作確認が必要 |

## 出力フォーマット

### 良い点

アクセシビリティの観点で良くできている点を挙げる。具体的な実装箇所を示しながら、なぜ良いのかを説明する。

### 問題点

重要度で分類して列挙する。

**Critical（致命的）** - 情報・機能へのアクセスが完全に遮断される

| パターン | 例 |
|----------|-----|
| 代替テキストの欠如 | 情報を持つ画像にaltがない、アイコンボタンにラベルがない |
| フォームラベルの欠如 | input/selectにラベルが関連付けられていない |
| キーボード操作不可 | クリックでしか動作しない要素、フォーカスできないインタラクティブ要素 |
| 致命的なARIAの誤用 | 存在しないIDへのaria-labelledby、role="presentation"で重要な情報を隠す |
| コンテンツの非表示 | display:noneやaria-hidden="true"で重要な情報が隠されている |

**Major（重大）** - アクセス可能だが大きな困難・混乱を招く

| パターン | 例 |
|----------|-----|
| 見出し構造の欠如・破綻 | セクション見出しが見出し要素でない、h1→h4のようなレベル飛ばし |
| ランドマークの欠如 | main/nav/headerなどがない、ランドマークの重複 |
| 不適切なARIA | 間違ったrole、不正なaria-*属性値、矛盾するARIA状態 |
| フォーカス順序の問題 | 視覚的な順序と大きく異なるtabindex、正のtabindexの使用 |
| 不明確なリンク・ボタン | 「こちら」「詳細」のみ、コンテキストなしの曖昧なテキスト |
| テーブル構造の不備 | th/scopeがない、複雑なテーブルにheaders/idがない |

**Minor（軽微）** - アクセス可能で改善の余地がある

| パターン | 例 |
|----------|-----|
| より適切な要素選択 | divにonclickの代わりにbutton、spanの代わりにstrong/em |
| 冗長なARIA | ネイティブセマンティクスと重複するrole、不要なaria-label |
| ベストプラクティス逸脱 | lang属性の欠如、スキップリンクがない |
| 軽微な見出し階層問題 | h2が1つしかない箇所でのh3使用など、軽微なレベル問題 |

各問題は以下の形式で記述する：

```
- **箇所**: 該当要素・コード・行番号
- **問題**: 具体的な内容
- **影響**: どういう障害を持っている人やどういう環境でどのように使いにくくなるか
- **WCAG**: 関連する達成基準（例: 1.1.1 非テキストコンテンツ）
- **修正案**: 推奨される対応
```

### 手動確認の推奨

自動チェックできなかった項目のリストと確認方法のヒントを提供する。

## WCAG達成基準の参照形式

問題を報告する際は、以下の形式でWCAG達成基準を参照する：

- 1.1.1 非テキストコンテンツ (A)
- 1.3.1 情報及び関係性 (A)
- 1.4.3 コントラスト (最低限) (AA)
- 2.1.1 キーボード (A)
- 2.4.6 見出し及びラベル (AA)
- 4.1.2 名前 (name)・役割 (role)・値 (value) (A)

## 参考リソース

- WCAG 2.2: https://www.w3.org/TR/WCAG22/
- WCAG 2.2 日本語訳: https://waic.jp/translations/WCAG22/
- WAI-ARIA APG: https://www.w3.org/WAI/ARIA/apg/
- WCAG達成基準早見表: https://www.w3.org/WAI/WCAG22/quickref/
